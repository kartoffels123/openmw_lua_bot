{
  "folder_name": "(OpenMW 0.49) Fix Mercantile Exploit and Rebalance",
  "lua_files": {
    "Fix Mercantile for OpenMW 0.49-52606-1-1-1712338178\\fixMerc\\scripts\\fixMerc.lua": "-- Save to my_lua_mod/scripts/example/player.lua\n\n-- remember that prices depend on your stamina\n-- the mod makes sure that the vendor's rating is always at least 25 points above the player's, but since mercantile's contribution to this rating is capped at 100 points, you'd be able to exploit the system at 76 mercantile + 50 personality + 100 luck\nlocal ONLY_FIX_EXPLOIT = false --set to true to not adjust the mercantile price curve and only prevent exploits by keeping vendor mercantile 25 points above your rating, in this case you can safely disable the easyBribe .omwaddon\nlocal ATTRIBUTE_TARGET = 75\nlocal SKILL_TARGET = 75\nlocal TARGET_MULT = 0.52 -- TARGET_MULT=1 means that the npc will always have the maximum level. TARGET_MULT=0 means that the npc will always have *your* level (plus 25 points to make it non-exploitable)\nlocal TOUCH_NON_VENDOR_NPCS = true -- since merchants now have such high mercantile, its harder to bribe them. the included esp increases bribe modifiers to 1.5x, but that would make other npcs too easily bribable. set to true to make sure that other npcs you talk to have at least 40 mercantile skill and 50 luck + personality\n\n\nlocal types = require('openmw.types')\nlocal self = require('openmw.self')\n\nlocal ALL_vendors = {\n\t[\"dagoth aladus\"] = true,\n\t[\"dagoth baler\"] = true,\n\t[\"dagoth daynil\"] = true,\n\t[\"dagoth delnus\"] = true,\n\t[\"dagoth drals\"] = true,\n\t[\"Dagoth Draven\"] = true,\n\t[\"dagoth elam\"] = true,\n\t[\"dagoth fals\"] = true,\n\t[\"dagoth fervas\"] = true,\n\t[\"dagoth fovon\"] = true,\n\t[\"dagoth galmis\"] = true,\n\t[\"dagoth girer\"] = true,\n\t[\"dagoth ienas\"] = true,\n\t[\"dagoth mendras\"] = true,\n\t[\"dagoth mulis\"] = true,\n\t[\"dagoth muthes\"] = true,\n\t[\"dagoth nilor\"] = true,\n\t[\"dagoth ralas\"] = true,\n\t[\"dagoth soler\"] = true,\n\t[\"dagoth velos\"] = true,\n\t[\"mudcrab_unique\"] = true,\n\t[\"scamp_creeper\"] = true,\n\t[\"wraith_sul_senipul\"] = true,\n\t[\"ababael timsar-dadisun\"] = true,\n\t[\"abelle chriditte\"] = true,\n\t[\"addut-lamanu\"] = true,\n\t[\"Agning\"] = true,\n\t[\"agrippina herennia\"] = true,\n\t[\"agronian guy\"] = true,\n\t[\"ajira\"] = true,\n\t[\"alarvyne indalas\"] = true,\n\t[\"Alcedonia Amnis\"] = true,\n\t[\"alds baro\"] = true,\n\t[\"alenus vendu\"] = true,\n\t[\"allding\"] = true,\n\t[\"alusaron\"] = true,\n\t[\"alveno andules\"] = true,\n\t[\"amarie charien\"] = true,\n\t[\"anarenen\"] = true,\n\t[\"anas ulven\"] = true,\n\t[\"ancola\"] = true,\n\t[\"andil\"] = true,\n\t[\"andilu drothan\"] = true,\n\t[\"anis seloth\"] = true,\n\t[\"anruin\"] = true,\n\t[\"arangaer\"] = true,\n\t[\"arantamo\"] = true,\n\t[\"areas\"] = true,\n\t[\"arenara\"] = true,\n\t[\"arnand liric\"] = true,\n\t[\"arrille\"] = true,\n\t[\"aryne telnim\"] = true,\n\t[\"ashuma-nud matluberib\"] = true,\n\t[\"ashumanu eraishah\"] = true,\n\t[\"ashur-dan\"] = true,\n\t[\"ather belden\"] = true,\n\t[\"audenian valius\"] = true,\n\t[\"aunius autrus\"] = true,\n\t[\"aurane frernis\"] = true,\n\t[\"avon oran\"] = true,\n\t[\"bacola closcius\"] = true,\n\t[\"baissa\"] = true,\n\t[\"balen andrano\"] = true,\n\t[\"banor seran\"] = true,\n\t[\"baren alen\"] = true,\n\t[\"barusi venim\"] = true,\n\t[\"belos falos\"] = true,\n\t[\"Belwen\"] = true,\n\t[\"benunius agrudilius\"] = true,\n\t[\"bereditte jastal\"] = true,\n\t[\"bereditte jastal_out\"] = true,\n\t[\"berela andrano\"] = true,\n\t[\"bervaso thenim\"] = true,\n\t[\"bervyn lleryn\"] = true,\n\t[\"berwen\"] = true,\n\t[\"bevene releth\"] = true,\n\t[\"big helende\"] = true,\n\t[\"bildren areleth\"] = true,\n\t[\"bivale teneran\"] = true,\n\t[\"boderi farano\"] = true,\n\t[\"bolnor andrani\"] = true,\n\t[\"bols indalen\"] = true,\n\t[\"both gro-durug\"] = true,\n\t[\"brarayni sarys\"] = true,\n\t[\"brathus dals\"] = true,\n\t[\"bronrod_the_roarer\"] = true,\n\t[\"brynjolfr\"] = true,\n\t[\"burcanius varo\"] = true,\n\t[\"Catia Sosia\"] = true,\n\t[\"chaplain ogrul\"] = true,\n\t[\"chargen boat guard 1\"] = true,\n\t[\"chargen boat guard 2\"] = true,\n\t[\"chirranirr\"] = true,\n\t[\"cienne sintieve\"] = true,\n\t[\"clagius clanler\"] = true,\n\t[\"cocistian quaspus\"] = true,\n\t[\"codus callonus\"] = true,\n\t[\"corrudus secunia\"] = true,\n\t[\"craeita jullalian\"] = true,\n\t[\"Crito Olcinius\"] = true,\n\t[\"crulius pontanian\"] = true,\n\t[\"dabienne mornardl\"] = true,\n\t[\"Dalam Gavyn\"] = true,\n\t[\"dalos golathyn\"] = true,\n\t[\"dandera selaro\"] = true,\n\t[\"danoso andrano\"] = true,\n\t[\"danso indules\"] = true,\n\t[\"Daron\"] = true,\n\t[\"daynali dren\"] = true,\n\t[\"daynes redothril\"] = true,\n\t[\"dead elite ord\"] = true,\n\t[\"dead ordinator\"] = true,\n\t[\"dead ordinator_key\"] = true,\n\t[\"dileno lloran\"] = true,\n\t[\"Dirver Relas\"] = true,\n\t[\"dolyn rols\"] = true,\n\t[\"dorisa darvel\"] = true,\n\t[\"dralasa nithryon\"] = true,\n\t[\"dralval andrano\"] = true,\n\t[\"Drarayne Girith\"] = true,\n\t[\"drelasa ramothran\"] = true,\n\t[\"dronos llervu\"] = true,\n\t[\"dulian\"] = true,\n\t[\"dulnea ralaal\"] = true,\n\t[\"dunel saryon\"] = true,\n\t[\"dunsalipal dun-ahhe\"] = true,\n\t[\"Edre Retene\"] = true,\n\t[\"Elbert Nermarc\"] = true,\n\t[\"eldrilu dalen\"] = true,\n\t[\"elegal\"] = true,\n\t[\"elegnan\"] = true,\n\t[\"elo arethan\"] = true,\n\t[\"elynu saren\"] = true,\n\t[\"ergnir\"] = true,\n\t[\"eris telas\"] = true,\n\t[\"erla\"] = true,\n\t[\"ernand thierry\"] = true,\n\t[\"ery\"] = true,\n\t[\"fadase selvayn\"] = true,\n\t[\"falanaamo\"] = true,\n\t[\"falvel arenim\"] = true,\n\t[\"Fanildil\"] = true,\n\t[\"fara\"] = true,\n\t[\"faras thirano\"] = true,\n\t[\"felara andrethi\"] = true,\n\t[\"felayn andral\"] = true,\n\t[\"fenas madach\"] = true,\n\t[\"ferele athram\"] = true,\n\t[\"folms mirel\"] = true,\n\t[\"folvys andalor\"] = true,\n\t[\"fomesa tharys\"] = true,\n\t[\"Fonari Indaren\"] = true,\n\t[\"fonas retheran\"] = true,\n\t[\"foves arenim\"] = true,\n\t[\"Frik\"] = true,\n\t[\"fryfnhild\"] = true,\n\t[\"gadayn andarys\"] = true,\n\t[\"gadela andus\"] = true,\n\t[\"galar rothan\"] = true,\n\t[\"galbedir\"] = true,\n\t[\"galen berer\"] = true,\n\t[\"galero andaram\"] = true,\n\t[\"galore salvi\"] = true,\n\t[\"Galsa Andrano\"] = true,\n\t[\"galtis guvron\"] = true,\n\t[\"galuro belan\"] = true,\n\t[\"ganalyn saram\"] = true,\n\t[\"garas seloth\"] = true,\n\t[\"garothmuk gro-muzgub\"] = true,\n\t[\"germia\"] = true,\n\t[\"gilan daynes\"] = true,\n\t[\"gils drelas\"] = true,\n\t[\"gilyan sedas\"] = true,\n\t[\"gilyne omoren\"] = true,\n\t[\"gindas ildram\"] = true,\n\t[\"gladroon\"] = true,\n\t[\"goldyn belaram\"] = true,\n\t[\"gomeso sarano\"] = true,\n\t[\"gorven menas\"] = true,\n\t[\"Guldrise Dralor\"] = true,\n\t[\"guls llervu\"] = true,\n\t[\"habasi\"] = true,\n\t[\"hakar the candle\"] = true,\n\t[\"hannabi zabynatus\"] = true,\n\t[\"hecerinde\"] = true,\n\t[\"heifnir\"] = true,\n\t[\"helviane desele\"] = true,\n\t[\"hession\"] = true,\n\t[\"hetman abelmawia\"] = true,\n\t[\"hickim\"] = true,\n\t[\"hinald\"] = true,\n\t[\"hjotra the peacock\"] = true,\n\t[\"hlendrisa seleth\"] = true,\n\t[\"hlodala savel\"] = true,\n\t[\"hodlismod\"] = true,\n\t[\"hreirek the lean\"] = true,\n\t[\"hrundi\"] = true,\n\t[\"huleeya\"] = true,\n\t[\"ibarnadad assirnarari\"] = true,\n\t[\"idonea munia\"] = true,\n\t[\"ilen faveran\"] = true,\n\t[\"irgola\"] = true,\n\t[\"irna maryon\"] = true,\n\t[\"Iulus Truptor\"] = true,\n\t[\"j'rasha\"] = true,\n\t[\"janand maulinie\"] = true,\n\t[\"jeanne\"] = true,\n\t[\"jobasha\"] = true,\n\t[\"jolda\"] = true,\n\t[\"Kaye\"] = true,\n\t[\"kjeld\"] = true,\n\t[\"kurapli\"] = true,\n\t[\"ladia flarugrius\"] = true,\n\t[\"Lalatia Varian\"] = true,\n\t[\"lanabi\"] = true,\n\t[\"Landorume\"] = true,\n\t[\"Lassour Zenammu\"] = true,\n\t[\"Laurina Maria\"] = true,\n\t[\"Letreius Muco\"] = true,\n\t[\"lirielle stoine\"] = true,\n\t[\"llandris thirandus\"] = true,\n\t[\"llarara omayn\"] = true,\n\t[\"llathyno hlaalu\"] = true,\n\t[\"Llemisa Marys\"] = true,\n\t[\"llether vari\"] = true,\n\t[\"llevas fels\"] = true,\n\t[\"lliros tures\"] = true,\n\t[\"lliryn fendyn\"] = true,\n\t[\"llorayna sethan\"] = true,\n\t[\"lloros sarano\"] = true,\n\t[\"lorbumol gro-aglakh\"] = true,\n\t[\"lord cluttermonkey\"] = true,\n\t[\"lucretinaus olcinius\"] = true,\n\t[\"madrale thirith\"] = true,\n\t[\"malpenix blonia\"] = true,\n\t[\"mamaea\"] = true,\n\t[\"manara othan\"] = true,\n\t[\"mandur omalen\"] = true,\n\t[\"manicky\"] = true,\n\t[\"manirai\"] = true,\n\t[\"manse andus\"] = true,\n\t[\"marasa aren\"] = true,\n\t[\"maren uvaren\"] = true,\n\t[\"massarapal\"] = true,\n\t[\"mebestian ence\"] = true,\n\t[\"meder nulen\"] = true,\n\t[\"mehra drora\"] = true,\n\t[\"mehra helas\"] = true,\n\t[\"meldor\"] = true,\n\t[\"melie frenck\"] = true,\n\t[\"methal seran\"] = true,\n\t[\"mevel fererus\"] = true,\n\t[\"mevure hlen\"] = true,\n\t[\"milar maryon\"] = true,\n\t[\"milie hastien\"] = true,\n\t[\"minasi bavani\"] = true,\n\t[\"miraso seran\"] = true,\n\t[\"mirisa\"] = true,\n\t[\"miun_gei\"] = true,\n\t[\"mivanu retheran\"] = true,\n\t[\"moroni uvelas\"] = true,\n\t[\"mororurg\"] = true,\n\t[\"mug gro-dulob\"] = true,\n\t[\"muriel sette\"] = true,\n\t[\"nalcarya of white haven\"] = true,\n\t[\"nalis gals\"] = true,\n\t[\"nalvilie saren\"] = true,\n\t[\"naspis apinia\"] = true,\n\t[\"Nebia Amphia\"] = true,\n\t[\"Nerile Andaren\"] = true,\n\t[\"nibani maesa\"] = true,\n\t[\"nileno dorvayn\"] = true,\n\t[\"nilvyn drothan\"] = true,\n\t[\"niras farys\"] = true,\n\t[\"nivos drivam\"] = true,\n\t[\"onlyhestandsthere\"] = true,\n\t[\"orero omothan\"] = true,\n\t[\"orns omaren\"] = true,\n\t[\"peragon\"] = true,\n\t[\"peregrina cnisia\"] = true,\n\t[\"Perien Aurelie\"] = true,\n\t[\"phane rielle\"] = true,\n\t[\"pierlette rostorard\"] = true,\n\t[\"ra'tesh\"] = true,\n\t[\"ra'virr\"] = true,\n\t[\"radras\"] = true,\n\t[\"ralds oril\"] = true,\n\t[\"ralen tilvur\"] = true,\n\t[\"ranosa gilvayn\"] = true,\n\t[\"raril giral\"] = true,\n\t[\"rarvela teran\"] = true,\n\t[\"rathal barus\"] = true,\n\t[\"raviso andalas\"] = true,\n\t[\"ravoso aryon\"] = true,\n\t[\"relms gilvilo\"] = true,\n\t[\"rilvase avani\"] = true,\n\t[\"rirnas athren\"] = true,\n\t[\"rissinia\"] = true,\n\t[\"rogdul gro-bularz\"] = true,\n\t[\"rolasa oren\"] = true,\n\t[\"Roner Arano\"] = true,\n\t[\"Sabrina Vitellia\"] = true,\n\t[\"saetring\"] = true,\n\t[\"salen ravel\"] = true,\n\t[\"Sanaso Sarothran\"] = true,\n\t[\"saras orelu\"] = true,\n\t[\"Sathyn Andrano\"] = true,\n\t[\"Sauleius Cullian\"] = true,\n\t[\"savard\"] = true,\n\t[\"scelian plebo\"] = true,\n\t[\"sedam omalen\"] = true,\n\t[\"sedris omalen\"] = true,\n\t[\"segunivus mantedius\"] = true,\n\t[\"selkirnemus\"] = true,\n\t[\"selvura andrano\"] = true,\n\t[\"sernsi drelas\"] = true,\n\t[\"sevyni saryon\"] = true,\n\t[\"shadbak gra-burbug\"] = true,\n\t[\"sharn gra-muzgob\"] = true,\n\t[\"shenk\"] = true,\n\t[\"shulki ashunbabi\"] = true,\n\t[\"simine fralinie\"] = true,\n\t[\"sinnammu mirpal\"] = true,\n\t[\"Sirollus Saccus\"] = true,\n\t[\"skinkintreesshade\"] = true,\n\t[\"snedbrir the smith\"] = true,\n\t[\"sodrara andalas\"] = true,\n\t[\"somutis vunnis\"] = true,\n\t[\"sonummu zabamat\"] = true,\n\t[\"sorosi radobar\"] = true,\n\t[\"sottilde\"] = true,\n\t[\"sovali uvayn\"] = true,\n\t[\"sovor trandel\"] = true,\n\t[\"Sunel Hlas\"] = true,\n\t[\"syloria siruliulus\"] = true,\n\t[\"Synnolian Tunifus\"] = true,\n\t[\"tanar llervi\"] = true,\n\t[\"tarvyn faren\"] = true,\n\t[\"telis salvani\"] = true,\n\t[\"telvon llethan\"] = true,\n\t[\"Ten-Tongues_Weerhat\"] = true,\n\t[\"tendris vedran\"] = true,\n\t[\"teril savani\"] = true,\n\t[\"tervur braven\"] = true,\n\t[\"thaeril\"] = true,\n\t[\"thanelen velas\"] = true,\n\t[\"thervul serethi\"] = true,\n\t[\"thongar\"] = true,\n\t[\"thorek\"] = true,\n\t[\"tiras sadus\"] = true,\n\t[\"tivam sadri\"] = true,\n\t[\"todd\"] = true,\n\t[\"tongue_toad\"] = true,\n\t[\"traldrisa tervayn\"] = true,\n\t[\"Trasteve\"] = true,\n\t[\"trivura arenim\"] = true,\n\t[\"tunila omavel\"] = true,\n\t[\"tusamircil\"] = true,\n\t[\"tussi\"] = true,\n\t[\"tuveso beleth\"] = true,\n\t[\"tyermaillin\"] = true,\n\t[\"ulfrun\"] = true,\n\t[\"ulmiso maloren\"] = true,\n\t[\"ulumpha gra-sharob\"] = true,\n\t[\"Ungeleb\"] = true,\n\t[\"ureso drath\"] = true,\n\t[\"urfing\"] = true,\n\t[\"urjorad\"] = true,\n\t[\"used clutter salesman\"] = true,\n\t[\"uulernil\"] = true,\n\t[\"uvele berendas\"] = true,\n\t[\"vasesius viciulus\"] = true,\n\t[\"vaval selas\"] = true,\n\t[\"vedran balen\"] = true,\n\t[\"verara rendo\"] = true,\n\t[\"verick gemain\"] = true,\n\t[\"wayn\"] = true,\n\t[\"yambagorn gor-shulor\"] = true,\n\t[\"ygfa\"] = true,\n\t[\"zanmulk sammalamus\"] = true,\n\t[\"zebba benamamat\"] = true,\n\t[\"zeno faustus\"] = true\n\t}\n\t\n\nlocal function onActivated(actor)\n\t\n\tactor:sendEvent(\"FixMerc_NPCActivated\",self)\n\t\n\tif not ALL_vendors[self.object.recordId] then\n\t\tif TOUCH_NON_VENDOR_NPCS and not ONLY_FIX_EXPLOIT then\n\t\t\t-- included esp sets the bribing modifiers to 1.5x, so we have to make sure that bribing isn't too easy with non-merchant npcs\n\t\t\tlocal mercantile = types.NPC.stats.skills.mercantile\n\t\t\tlocal luck = types.NPC.stats.attributes.luck\n\t\t\tlocal personality = types.NPC.stats.attributes.personality\n\t\t\tif personality(self).base < 55 then\n\t\t\t\tpersonality(self).base = 55\n\t\t\tend\n\t\t\tif luck(self).base <50 then\n\t\t\t\tluck(self).base = 50\n\t\t\tend\n\t\t\tif mercantile(self).base <40 then\n\t\t\t\tmercantile(self).base = 40\n\t\t\tend\n\t\tend\n\t\treturn\n\tend\n\t\n\t----[[\n\tlocal mercantile = types.NPC.stats.skills.mercantile\n\tlocal luck = types.NPC.stats.attributes.luck\n\tlocal personality = types.NPC.stats.attributes.personality\n\tlocal playerRating = mercantile(actor).modified + 0.2*personality(actor).modified + 0.1*luck(actor).modified\n\tlocal targetRating = math.min(ATTRIBUTE_TARGET,50)*0.2 + math.min(ATTRIBUTE_TARGET,100)*0.1 + SKILL_TARGET +26\n\tlocal merchantBase = 0.2*personality(self).modified + 0.1*luck(self).modified + mercantile(self).modified\n\tlocal calculatedRating = math.max(playerRating+26,(playerRating*(1-TARGET_MULT) + targetRating*TARGET_MULT)) -- always needs to be ~25 above player rating\n\tif ONLY_FIX_EXPLOIT then\n\t\tcalculatedRating = math.max(playerRating+26, merchantBase)\n\tend\n\tif calculatedRating > 109 then --only up to 100 mercantile contribute to the BASE offer, but i assume barely any npc has less than 30 in his attributes so we get another 9 points headroom before we have to mess with their attributes\n\t\tif personality(self).modified < 50 then\n\t\t\tpersonality(self).base = math.max(math.min(personality(self).base,70),30,personality(self).base+50-personality(self).modified)\n\t\tend\n\t\tif luck(self).modified <100 then\n\t\t\tluck(self).base = math.max(30,luck(self).base+100-luck(self).modified)\n\t\tend\n\tend\n\tmerchantBase = 0.2*personality(self).modified + 0.1*luck(self).modified + mercantile(self).modified\n\t\n\tmercantile(self).base = math.max(0,math.floor(mercantile(self).base+calculatedRating-merchantBase))\n\t\n\t-- ]]--\nend\n\n-- int MechanicsManager::getBarterOffer\n-- bool Trading::haggle\n\nreturn { engineHandlers = { onActivated = onActivated } }",
    "Fix Mercantile for OpenMW 0.49-52606-1-1-1712338178\\fixMerc\\scripts\\fixMerc_player.lua": "\nlocal I = require('openmw.interfaces')\nlocal types = require('openmw.types')\nlocal self = require('openmw.self')\nlocal Player = require('openmw.types').Player\nlocal core = require('openmw.core')\n\n-----------------\n-- CONFIGURATION: (how many skill points do you get per 100g spent/gained? each skill level you need skillpoints equal to your skill level)\nSKILL_POINTS_PER_100G = 1.5\nBRIBE_MULTIPLIER = 3\n\n\ntemporary_gold_change=0\nplayer_gold_old=nil\nplayer_gold_old2=nil\ncurrent_vendor_npc=nil\nlastBarterModeTime=0\n\nI.SkillProgression.addSkillUsedHandler(function(skillid, params)\n    if skillid == 'speechcraft' and params.skillGain > 0 then\n\t\tif player_gold_old2 - player_gold_old == 10 then\n\t\t\ttemporary_gold_change = temporary_gold_change + 10*BRIBE_MULTIPLIER\n\t\telseif player_gold_old2 - player_gold_old == 100 then\n\t\t\ttemporary_gold_change = temporary_gold_change + 100*BRIBE_MULTIPLIER\n\t\telseif player_gold_old2 - player_gold_old == 1000 then\n\t\t\ttemporary_gold_change = temporary_gold_change + 1000*BRIBE_MULTIPLIER\n\t\tend\n    end\nend)\n\nlocal function onFrame(deltaTime)\n\tif current_vendor_npc then\n\t\tif not I.UI.getMode() then\n\t\t\tcurrent_vendor_npc = nil\n\t\t\treturn\n\t\tend\n\t\t--for detecting bribe\n\t\tplayer_gold_old2 = player_gold_old\n\t\tlocal goldItem = types.Actor.inventory(self):find('gold_001')\n\t\tlocal goldAmount = goldItem and goldItem.count or 0\n\t\t--gold changes after barter mode is closed\n\t\tlocal now = core.getRealTime()\n\t\tif I.UI.getMode() == \"Barter\" then\n\t\t\tlastBarterModeTime = now\n\t\tend\n\t\tif not player_gold_old then\n\t\t\tplayer_gold_old = goldAmount\n\t\telseif goldAmount ~= player_gold_old then\n\t\t\tif now - lastBarterModeTime < 0.1 then\n\t\t\t\ttemporary_gold_change = temporary_gold_change + math.abs(goldAmount - player_gold_old)\n\t\t\tend\n\t\t\tplayer_gold_old = goldAmount\n\t\tend\n\t\tif temporary_gold_change >= 10 then\n\t\t\tlocal skillLevel = Player.stats.skills.mercantile(self).base\n\t\t\t--60% less exp at level 100\n\t\t\tlocal skillIncrease = math.max(0.01,(1-0.006*skillLevel)*SKILL_POINTS_PER_100G/100*temporary_gold_change)\n\t\t\t--print(skillIncrease)\n\t\t\tI.SkillProgression.skillUsed('mercantile', {skillGain=skillIncrease, useType = 1, scale = nil})\n\t\t\ttemporary_gold_change = 0\n\t\tend\n\tend\nend\n\nlocal function FixMerc_NPCActivated (npc)\n\tif npc.recordId ~= \"scamp_creeper\" and npc.recordId ~= \"mudcrab_unique\" then\n\t\tcurrent_vendor_npc = npc\n\tend\n\nend\n\n\nreturn {\n\tengineHandlers = { onFrame = onFrame },\n\teventHandlers = { FixMerc_NPCActivated = FixMerc_NPCActivated }\n}"
  }
}