{
  "folder_name": "Songs of the Ashen Winds",
  "lua_files": {
    "SongsOftheAshenWinds_0.3-54759-0-3-1717082019\\SongsOftheAshenWinds_0.3\\scripts\\SongsOfTheAshenWinds\\global.lua": "\nlocal types = require('openmw.types')\nlocal I = require('openmw.interfaces')\n\n\n\n\n\n\n\nlocal songMap = {\n   bk_ashland_hymns = 'Wondrous Love',\n   bk_five_far_stars = 'Red Mountain',\n   bk_words_of_the_wind = 'May I shrink to Dust',\n}\n\nlocal function makePath(song)\n   return string.format('music/songsoftheashenwinds/%s.flac', song)\nend\n\nlocal function playSong(player, song)\n   player:sendEvent('urm_SotAW_play', makePath(song))\nend\n\nI.ItemUsage.addHandlerForType(types.Book, function(object, actor)\n   if actor.type == types.Player then\n      local song = songMap[object.recordId]\n      if song then\n         print('SotAW playing', song)\n         playSong(actor, song)\n      end\n   end\nend)\n",
    "SongsOftheAshenWinds_0.3-54759-0-3-1717082019\\SongsOftheAshenWinds_0.3\\scripts\\SongsOfTheAshenWinds\\menu.lua": "local I = require('openmw.interfaces')\n\nI.Settings.registerPage({\n   key = 'SongsOfTheAshenWind',\n   l10n = 'SongsOfTheAshenWind',\n   name = 'page_name',\n   description = 'page_description',\n})\n\nI.Settings.registerGroup({\n   key = 'SongsOfTheAshenWind_playback',\n   page = 'SongsOfTheAshenWind',\n   l10n = 'SongsOfTheAshenWind',\n   name = 'playback_group',\n   permanentStorage = true,\n   settings = {\n      {\n         key = 'playOnRead',\n         name = 'playOnRead_name',\n         description = 'playOnRead_description',\n         default = true,\n         renderer = 'checkbox',\n      },\n      {\n         key = 'stopOnClose',\n         name = 'stopOnClose_name',\n         description = 'stopOnClose_description',\n         default = false,\n         renderer = 'checkbox',\n      },\n   },\n})\n",
    "SongsOftheAshenWinds_0.3-54759-0-3-1717082019\\SongsOftheAshenWinds_0.3\\scripts\\SongsOfTheAshenWinds\\player.lua": "local ambient = require('openmw.ambient')\nlocal storage = require('openmw.storage')\nlocal I = require('openmw.interfaces')\n\nlocal playbackSettings = storage.playerSection('SongsOfTheAshenWind_playback')\n\nlocal isPlaying = nil\n\nreturn {\n   engineHandlers = {\n      onFrame = function()\n         if isPlaying then\n            if not ambient.isMusicPlaying() then\n               print('Stopped playing', isPlaying)\n               isPlaying = nil\n            elseif playbackSettings:get('stopOnClose') and I.UI.getMode() ~= 'Book' then\n               ambient.stopMusic()\n               isPlaying = nil\n            end\n         end\n      end,\n   },\n   eventHandlers = {\n      urm_SotAW_play = function(path)\n         if not playbackSettings:get('playOnRead') then return end\n         ambient.streamMusic(path)\n         isPlaying = path\n      end,\n   },\n}\n"
  }
}