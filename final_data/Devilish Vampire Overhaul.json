{
  "folder_name": "Devilish Vampire Overhaul",
  "lua_files": {
    "Devilish Vampire Overhaul (Vampires get stronger)-52969-2-5-1717173114\\Data Files\\Devilish_Vampire_Overhaul.lua": "local ui = require('openmw.ui')\nlocal nearby = require('openmw.nearby')\nlocal self = require('openmw.self')\nlocal types = require('openmw.types')\nlocal time = require('openmw_aux.time')\n\n--local function onKeyPress(key)\n--           if key.symbol == 'c' then  -- would run on keypress, need two ends\n \n--local function onUpdate(dt)    -- would run on every frame, needs one end\n\nlocal stopFn = time.runRepeatedly(function() -- runs the function every 1 second, defined at bottom\n             local acts = nearby.actors \n              for i, a in pairs(acts) do\n                local dist = (self.position - acts[i].position):length() -- the distance to actor\n                \n                if dist < 100 and dist > 10 then  -- the max distance and over 0 to prevent player\n                  \n                  if self.controls.sneak == true then -- if sneaking\n                          \n                    \n                    local miss = { \n                \"skeleton\",\n                \"scrib\",\n        \"skeleton champion\",\n        \"skeleton entrance\",\n        \"skeleton archer\",\n        \"T_Mw_Und_SkelArc_01\",\n        \"skeleton warrior\",\n        \"TR_m4_dead1_i4-260-hla\",\n        \"skeleton hero dead\",\n        \"skeleton_weak\",\n        \"TR_m4_Cr_AA_SehutuSke02\",  \n        \"BM_wolf_skeleton\",\n        \"skeleton nord \",\n        \"TR_m3_skeleton_plague\",\n        \"dead_skeleton\",\n        \"skeleton nord_2\",  \n        \"T_Glb_Und_SkelCmpPl_01\", \n        \"T_Glb_Und_SkelCmpGr_01\",\n        \"T_Glb_Und_SkelOrc_02\",\n        \"T_Glb_Und_SkelPl_01\",\n        \"T_Glb_Und_SkelArise_02\",\n        \"skeleton_relvel\",\n        \"worm lord\",\n        \"skeleton_Vemynal\",\n        \"slaughterfish\",\n        \"Slaughterfish_Small\",\n        \"ancestor_ghost_greater\",\n        \"scamp\",\n        \"lich_barilzar\",\n        \"clannfear\",\n        \"atronach_flame\",\n        \"atronach_storm\",\n        \"atronach_frost\",\n        \"daedroth\",\n        \"winged twilight\",\n        \"BM_draugr01\",\n        \"centurion_steam\",\n        \"centurion_spider\", \n        \"centurion_spider_dead\",\n        \"centurion_sphere\",\n        \"centurion_steam_advance\",\n        \"T_Mw_Und_Mum_Rise_02\",\n        \"T_Dwe_Cre_CentArc_01\",\n        \"T_Mw_Und_Mum_01\",\n        \"hunger\",\n        \"ogrim\",\n        \"ancestor_ghost\",\n        \"golden saint\",\n        \"dwarven ghost\",\n        \"fabricant_verminous\",\n        \"bonelord\",\n        \"dremora\",\n        \"lich\",\n        \"Bonewalker_Greater\",\n        \"T_Dwe_Und_GhstGr_01\",\n        \"dremora_lord\",\n        \"T_Dae_Cre_Drid_01\",\n        \"T_Dae_Cre_LesserClfr_01\",  \n        \"bonewalker\",\n        \"corprus_stalker\",\n        \"ascended_sleeper\",\n        \"bonewalker_weak\"\n                        }\n                        \n                        \n                    for c, v in pairs(miss) do -- ensures all nearby actors are taken into account, ie. no duplicates                    \n                      if acts[i].recordId == miss[c] then\n                                              \n                        return\n                                                                        \n                      end\n                    end\n                  \n                  \n                    local spe = types.Player.spells(self)\n                     for c, v in pairs(spe) do\n                      if spe[c].name == \"Vampirism\" then  -- if vampire\n                        \n                        if types.Actor.stats.dynamic.health(acts[i]).current <= 0 then -- if actor is dead\n                           \n                          types.Actor.spells(self):add(\"Bloodthirst_Drink_Option\") -- given spell\n                          \n                        end\n                      end\n                    end\n                  end\n                end\n              end\n\n           end,\n     1 * time.second)  -- time interval\n                  \n   --end             \n--end\n\n\n--return { engineHandlers = { onUpdate = onUpdate } }\n--return { engineHandlers = { onKeyPress = onKeyPress } }",
    "Devilish Vampire Overhaul (Vampires get stronger)-52969-2-5-1717173114\\Data Files\\MWSE\\mods\\Devilish_Vampire_Overhaul\\main.lua": "local function isPlayerVampire()\n    return tes3.isAffectedBy({reference = tes3.player, effect = tes3.effect.vampirism})\nend\n\nlocal function isPlayerSneaking()\n    return tes3.mobilePlayer.isSneaking\nend\n\nlocal function onActivate(e)\n    if e.activator == tes3.player then\n        if e.target.baseObject.objectType == tes3.objectType.npc  then\n            if isPlayerSneaking() and isPlayerVampire() then\n                -- Do something when a vampire player sneaks and activates an actor\n                -- Replace the following line with your desired code\n                if e.target.mobile.isDead == true then\n\t\t    tes3.addSpell({reference = tes3.player, spell = \"Bloodthirst_Drink_Option\"})\n\t\t    return false\n\t\t    end\n            end\n        end\n    end\nend\nevent.register(\"activate\", onActivate)",
    "Devilish Vampire Overhaul (Vampires get weaker)-52969-2-5-1717173370\\Data Files\\Devilish_Vampire_Overhaul.lua": "local ui = require('openmw.ui')\nlocal nearby = require('openmw.nearby')\nlocal self = require('openmw.self')\nlocal types = require('openmw.types')\nlocal time = require('openmw_aux.time')\n\n--local function onKeyPress(key)\n--           if key.symbol == 'c' then  -- would run on keypress, need two ends\n \n--local function onUpdate(dt)    -- would run on every frame, needs one end\n\nlocal stopFn = time.runRepeatedly(function() -- runs the function every 1 second, defined at bottom\n             local acts = nearby.actors \n              for i, a in pairs(acts) do\n                local dist = (self.position - acts[i].position):length() -- the distance to actor\n                \n                if dist < 100 and dist > 10 then  -- the max distance and over 0 to prevent player\n                  \n                  if self.controls.sneak == true then -- if sneaking\n                          \n                    \n                    local miss = { \n                \"skeleton\",\n                \"scrib\",\n        \"skeleton champion\",\n        \"skeleton entrance\",\n        \"skeleton archer\",\n        \"T_Mw_Und_SkelArc_01\",\n        \"skeleton warrior\",\n        \"TR_m4_dead1_i4-260-hla\",\n        \"skeleton hero dead\",\n        \"skeleton_weak\",\n        \"TR_m4_Cr_AA_SehutuSke02\",  \n        \"BM_wolf_skeleton\",\n        \"skeleton nord \",\n        \"TR_m3_skeleton_plague\",\n        \"dead_skeleton\",\n        \"skeleton nord_2\",  \n        \"T_Glb_Und_SkelCmpPl_01\", \n        \"T_Glb_Und_SkelCmpGr_01\",\n        \"T_Glb_Und_SkelOrc_02\",\n        \"T_Glb_Und_SkelPl_01\",\n        \"T_Glb_Und_SkelArise_02\",\n        \"skeleton_relvel\",\n        \"worm lord\",\n        \"skeleton_Vemynal\",\n        \"slaughterfish\",\n        \"Slaughterfish_Small\",\n        \"ancestor_ghost_greater\",\n        \"scamp\",\n        \"lich_barilzar\",\n        \"clannfear\",\n        \"atronach_flame\",\n        \"atronach_storm\",\n        \"atronach_frost\",\n        \"daedroth\",\n        \"winged twilight\",\n        \"BM_draugr01\",\n        \"centurion_steam\",\n        \"centurion_spider\", \n        \"centurion_spider_dead\",\n        \"centurion_sphere\",\n        \"centurion_steam_advance\",\n        \"T_Mw_Und_Mum_Rise_02\",\n        \"T_Dwe_Cre_CentArc_01\",\n        \"T_Mw_Und_Mum_01\",\n        \"hunger\",\n        \"ogrim\",\n        \"ancestor_ghost\",\n        \"golden saint\",\n        \"dwarven ghost\",\n        \"fabricant_verminous\",\n        \"bonelord\",\n        \"dremora\",\n        \"lich\",\n        \"Bonewalker_Greater\",\n        \"T_Dwe_Und_GhstGr_01\",\n        \"dremora_lord\",\n        \"T_Dae_Cre_Drid_01\",\n        \"T_Dae_Cre_LesserClfr_01\",  \n        \"bonewalker\",\n        \"corprus_stalker\",\n        \"ascended_sleeper\",\n        \"bonewalker_weak\"\n                        }\n                        \n                        \n                    for c, v in pairs(miss) do -- ensures all nearby actors are taken into account, ie. no duplicates                    \n                      if acts[i].recordId == miss[c] then\n                                              \n                        return\n                                                                        \n                      end\n                    end\n                  \n                  \n                    local spe = types.Player.spells(self)\n                     for c, v in pairs(spe) do\n                      if spe[c].name == \"Vampirism\" then  -- if vampire\n                        \n                        if types.Actor.stats.dynamic.health(acts[i]).current <= 0 then -- if actor is dead\n                           \n                          types.Actor.spells(self):add(\"Bloodthirst_Drink_Option\") -- given spell\n                          \n                        end\n                      end\n                    end\n                  end\n                end\n              end\n\n           end,\n     1 * time.second)  -- time interval\n                  \n   --end             \n--end\n\n\n--return { engineHandlers = { onUpdate = onUpdate } }\n--return { engineHandlers = { onKeyPress = onKeyPress } }",
    "Devilish Vampire Overhaul (Vampires get weaker)-52969-2-5-1717173370\\Data Files\\MWSE\\mods\\Devilish_Vampire_Overhaul\\main.lua": "local function isPlayerVampire()\n    return tes3.isAffectedBy({reference = tes3.player, effect = tes3.effect.vampirism})\nend\n\nlocal function isPlayerSneaking()\n    return tes3.mobilePlayer.isSneaking\nend\n\nlocal function onActivate(e)\n    if e.activator == tes3.player then\n        if e.target.baseObject.objectType == tes3.objectType.npc  then\n            if isPlayerSneaking() and isPlayerVampire() then\n                -- Do something when a vampire player sneaks and activates an actor\n                -- Replace the following line with your desired code\n                if e.target.mobile.isDead == true then\n\t\t    tes3.addSpell({reference = tes3.player, spell = \"Bloodthirst_Drink_Option\"})\n\t\t    return false\n\t\t    end\n            end\n        end\n    end\nend\nevent.register(\"activate\", onActivate)"
  }
}