{
  "folder_name": "Devilish Sleep Spell (OpenMW 0.49)",
  "lua_files": {
    "Devilish Sleep Spell-54798-1-2-1722122421\\Data Files\\scripts\\sleep_npc_script.lua": "local nearby = require('openmw.nearby')\nlocal AI = require('openmw.interfaces').AI\nlocal self = require('openmw.self')\nlocal types = require('openmw.types')\nlocal time = require('openmw_aux.time')\nlocal NPC = require('openmw.types').NPC\nlocal core = require('openmw.core')\n\n    local doOnce = 0\n    local stopFn = time.runRepeatedly(function() \n\n      local FightValue = types.Actor.stats.ai.fight(self).base\n      local StanceValue = types.Actor.getStance(self)\n      local HealthValueB = types.Actor.stats.dynamic.health(self).base\n      local HealthValueC = types.Actor.stats.dynamic.health(self).current\n      local illegalSleepSpell = 1\n    \n      if types.Actor.activeSpells(self):isSpellActive('detd_sleep_spell') and StanceValue == 0 then\n      types.Actor.stats.dynamic.fatigue(self).current = -4\n      end\n\n    if doOnce == 0 and StanceValue == 0 and FightValue < 90 and types.Actor.activeSpells(self):isSpellActive('detd_sleep_spell') then\n     illegalSleepSpell = 99\n     doOnce = 1\n     core.sendGlobalEvent(\"detdGlobalCheckSleep\", illegalSleepSpell)\n    end\n\n    if HealthValueB > HealthValueC then\n      types.Actor.spells(self):remove('detd_sleep_spell')\n      types.Actor.stats.dynamic.fatigue(self).current = 10\n    end\n\n    if doOnce == 1 and types.Actor.activeSpells(self):isSpellActive('detd_sleep_spell') == false then\n      doOnce = 0\n    end\n\n      end,\n                                        1 * time.second)  -- print 'Test' every 5 seconds\n",
    "Devilish Sleep Spell-54798-1-2-1722122421\\Data Files\\scripts\\sleep_npc_script_global.lua": "local time = require('openmw_aux.time')\nlocal world = require('openmw.world')\nlocal types = require('openmw.types')\n\nlocal function SleepCheck(data)\n    world.mwscript.getGlobalScript(\"detd_sleepcheck_global\").variables.CheckSleep = data\n    end\n\n\n    return {\n        eventHandlers = {\n          detdGlobalCheckSleep = SleepCheck\n                }\n            }"
  }
}