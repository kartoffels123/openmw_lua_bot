{
  "folder_name": "Devilish Shrink Spell (OpenMW 0.49)",
  "lua_files": {
    "Devilish Shrink Spell Without Mesh Correction-54898-1-8-1-1724098115\\Data Files\\scripts\\shrink_pc_script_global.lua": "local types = require('openmw.types')\nlocal acti = require(\"openmw.interfaces\").Activation\nlocal world = require('openmw.world')\nlocal time = require('openmw_aux.time')\n\nlocal isShrinking\nlocal sizeIncrement = 0.01\nlocal maxSize = 1.0\nlocal minSize = 0.1\nlocal status = 0\n\nlocal function detd_DSS_nearbyItems(data)\nlocal nearbyItems = data.nearbyItems\nfor index, value in ipairs(nearbyItems) do -- upon cellchange all tiny inventory items will be 0.5 scale again, this sets them back to 0.1\n  if value.scale < 0.51 and value.scale > 0.49  then\n    value:setScale(0.1)\n  end\nend\nend\n\nlocal stopFn = time.runRepeatedly(function() \n  local player = world.players[1]\n  if player ~= nil then\n  local playerSize = player.scale\nif types.Actor.activeSpells(player):isSpellActive('detd_shrink_spell') then\nisShrinking = 1 --shrinking\nelse \nisShrinking = 0 -- growing\nend\nif isShrinking == 0 then\n  if playerSize > 1 then\n  else\n      player:setScale(playerSize + 0.01)\n      for index, value in ipairs(types.Actor.inventory(player):getAll()) do\n      value:setScale(player.scale)\n  end\n  end\nelseif isShrinking == 1 then\n  if playerSize - sizeIncrement < minSize then\n  else\n    player:setScale(playerSize - 0.01)\n    for index2, value2 in ipairs(types.Actor.inventory(player):getAll()) do\n     value2:setScale(player.scale)\n    end\n  end\nend\nend\n\n\n\nend,\n0.01 * time.second)  -- print 'Test' every 5 seconds\n\nlocal function forbidActivate(object, actor)\n  local player = world.players[1]\n  if player == nil then\n    return\n  end\n    if (player.scale < 0.8) and object.scale > 0.99 then -- if the player is small \n  return false\nend\nend\n\n  acti.addHandlerForType(types.Miscellaneous, forbidActivate)\n  acti.addHandlerForType(types.Potion, forbidActivate)\n  acti.addHandlerForType(types.Book, forbidActivate)\n  acti.addHandlerForType(types.Clothing, forbidActivate)\n  acti.addHandlerForType(types.Container, forbidActivate)\n  acti.addHandlerForType(types.Door, forbidActivate)\n  acti.addHandlerForType(types.Light, forbidActivate)\n  acti.addHandlerForType(types.Weapon, forbidActivate)\n  acti.addHandlerForType(types.Armor, forbidActivate)\n  acti.addHandlerForType(types.Ingredient, forbidActivate)\n\n               return {\n                eventHandlers = {\n                  detd_DSS_nearbyItems = detd_DSS_nearbyItems,\n                }}",
    "Devilish Shrink Spell Without Mesh Correction-54898-1-8-1-1724098115\\Data Files\\scripts\\shrink_pc_script_player.lua": "local self = require('openmw.self')\nlocal types = require('openmw.types')\nlocal core = require('openmw.core')\nlocal nearby = require('openmw.nearby')\n\nlocal function onActive()\n  local nearbyItems = nearby.items\n  core.sendGlobalEvent(\"detd_DSS_nearbyItems\", { nearbyItems = nearbyItems})\nend\n\n   return {\n  engineHandlers = {\n    onActive = onActive,\n         }\n          }\n"
  }
}